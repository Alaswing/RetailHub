<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Retail Hub — El centro de soluciones para tu negocio</title>
<meta name="description" content="Consultoría retail: operación, capacitación, diseño y marketing para ordenar, optimizar y escalar tu tienda." />
<meta name="theme-color" content="#1570EF" />
<link rel="icon" href="assets/favicon.png" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --brand-blue:#1570EF; --brand-green:#16A34A; --brand-white:#FFFFFF;
    --ink:#0F172A; --muted:#475569; --bg:#0B1220; --card:#0F1626;
    --line:rgba(255,255,255,.08); --shadow:0 10px 30px rgba(0,0,0,.35);
    --radius:18px; --maxw:1100px; --header-h:72px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:
    radial-gradient(1200px 800px at 80% -10%, rgba(21,112,239,.25), transparent 60%),
    radial-gradient(1000px 600px at -10% 10%, rgba(22,163,74,.18), transparent 60%), var(--bg);
    color:#E5E7EB; line-height:1.6}
  a{color:var(--brand-blue)} a:hover{text-decoration:underline}
  img{max-width:100%; display:block}
  .container{max-width:var(--maxw); margin:0 auto; padding:0 20px}

  header{position:sticky; top:0; z-index:40; background:rgba(11,18,32,.65); backdrop-filter: blur(8px) saturate(160%); border-bottom:1px solid var(--line)}
  .nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
  .brand{display:flex; align-items:center; gap:12px; font-weight:800}
  .brand img{width:36px; height:36px; border-radius:8px}
  /* Mobile option A: horizontal scrollable nav */
  header nav{display:flex; gap:8px; overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch; scrollbar-width:none}
  header nav::-webkit-scrollbar{display:none}
  header nav a{display:inline-flex; padding:8px 12px; border:1px solid var(--line); border-radius:999px; color:#E5E7EB; text-decoration:none}

  main section{padding:54px 0}
  .hero{display:grid; grid-template-columns:1.2fr 1fr; gap:28px; padding:60px 0 36px}
  .badge{display:inline-flex; align-items:center; gap:8px; font-size:12px; color:#CBD5E1; border:1px solid var(--line); padding:6px 10px; border-radius:999px}
  h1{font-size:clamp(28px,5vw,54px); line-height:1.1; margin:14px 0}
  .lead{font-size:clamp(15px,1.6vw,18px); color:#CBD5E1}
  .cta{display:flex; gap:12px; margin-top:18px; flex-wrap:wrap}
  .btn{display:inline-block; border:none; border-radius:12px; padding:12px 16px; font-weight:700; cursor:pointer; text-decoration:none}
  .btn-primary{background:linear-gradient(135deg,var(--brand-blue),#6366F1); color:#0B1220; box-shadow:var(--shadow)}
  .btn-ghost{background:transparent; border:1px solid var(--line); color:#E5E7EB}

  .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); border:1px solid var(--line); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow); transition: box-shadow .25s ease, border-color .25s ease, transform .2s ease;}
  .card.glow:hover,.card.glow:focus-within{border-color: var(--accent); box-shadow:0 0 0 2px var(--accent), 0 0 20px 4px var(--accentA); transform: translateY(-2px);}
  .grid3{display:grid; grid-template-columns:repeat(3,1fr); gap:18px}
  .pill{display:inline-flex; padding:4px 8px; border-radius:999px; font-size:12px; border:1px solid var(--line); color:#A3AED0}
  .pricing .price{font-size:28px; font-weight:800}
  .pricing .tag{font-size:12px; color:#A3AED0}
  ul.list-simple{list-style: disc; margin:0; padding-left:20px}
  ul.list-simple li{margin-bottom:6px}
  footer{padding:28px 0 60px; color:#A3AED0; border-top:1px solid var(--line)}
  .reveal{opacity:0; transform:translateY(18px); transition:opacity .7s ease, transform .7s ease}
  .reveal.visible{opacity:1; transform:translateY(0)}
  section[id]{scroll-margin-top: calc(var(--header-h) + 8px)}
  html{scroll-behavior: smooth;}
  @media (max-width:980px){ .hero{grid-template-columns:1fr} .grid3{grid-template-columns:1fr} }

  /* Extra mobile polish */
  @media (max-width:720px){
    .brand img{width:30px; height:30px}
    .nav{padding:10px 0}
    main section{padding:42px 0}
    .card{padding:16px}
  }

  /* ===== Modal genérico ===== */
  .modal-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.55); backdrop-filter: blur(4px);
    display:none; align-items:center; justify-content:center; z-index:60;
  }
  .modal-backdrop.active{display:flex}
  .modal{
    width:min(760px, 92vw); max-height:86vh; overflow:auto;
    background:var(--card); border:1px solid var(--line); border-radius:20px; box-shadow:var(--shadow);
    padding:22px;
  }
  .modal header{position:sticky; top:0; background:transparent; border:none; padding:0 0 12px 0}
  .modal h3{margin:0}
  .modal .close{
    margin-left:auto; background:transparent; border:1px solid var(--line); color:#E5E7EB;
    border-radius:10px; padding:6px 10px; cursor:pointer;
  }

  /* Campos form modal */
  form{display:grid; gap:14px}
  .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
  label{display:block; font-size:14px; color:#CBD5E1; margin-bottom:4px}
  input, select, textarea{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--line);
    background:#0c1424; color:#E5E7EB; outline:none;
  }
  textarea{min-height:110px; resize:vertical}
  .helper{font-size:12px; color:#A3AED0}
  .btn-submit{background:linear-gradient(135deg,var(--brand-green),#22d3ee); color:#0B1220; font-weight:800}

  /* Paso 3: Mejor contraste en días disponibles del calendario (si Flatpickr está presente) */
  .modal .flatpickr-day:not(.flatpickr-disabled):not(.prevMonthDay):not(.nextMonthDay){
    color:#F8FAFC; font-weight:600;
  }
  .modal .flatpickr-day.today:not(.selected){
    border:1px solid #94a3b8;
  }

  /* ===== PlanModal temas ===== */
  .plan-theme-basic{--accent: var(--brand-white); --accentA: rgba(255,255,255,.35);}
  .plan-theme-pro{--accent: var(--brand-blue); --accentA: rgba(21,112,239,.35);}
  .plan-theme-max{--accent: var(--brand-green); --accentA: rgba(22,163,74,.35);}
  .plan-modal .header-accent{border:2px solid var(--accent); border-radius:14px; padding:10px 14px; box-shadow:0 0 0 2px var(--accent), 0 0 18px 4px var(--accentA);}
</style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand" id="brandHome">
        <img src="assets/logo-retailhub.png" alt="Retail Hub logo">
        <span>Retail Hub</span>
      </div>
      <nav style="display:flex; gap:8px">
        <a href="#nosotros">Nosotros</a>
        <a href="#planes">Planes</a>
        <a href="#servicios">Servicios</a>
        <a href="#capacitacion">Capacitación</a>
        <a href="#" id="openModalBtn">Asesoría</a>
        <a href="#contacto">Contacto</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="container hero">
      <div class="reveal">
        <span class="badge">Consultoría • Operación • Capacitación</span>
        <h1>El centro de soluciones para tu negocio</h1>
        <p class="lead">Ordenamos, optimizamos y escalamos operaciones retail con estrategias prácticas y personalizadas.</p>
        <div class="cta">
          <a class="btn btn-primary" href="#" id="openModalBtn2">Quiero una asesoría</a>
          <a class="btn btn-ghost" href="#planes">Ver planes</a>
        </div>
      </div>
      <div class="card reveal">
        <img src="assets/logo-retailhub.png" alt="Mockup Retail Hub"/>
      </div>
    </section>

    <!-- NOSOTROS -->
    <section id="nosotros" class="container">
      <div class="reveal">
        <h2>Nosotros</h2>
        <p>Sumamos más de 20 años de experiencia combinada en operación, capacitación, diseño y marketing retail. Hemos vivido los retos del piso de venta y la gestión de equipos, transformando la teoría en resultados reales. Nuestro compromiso es ayudarte a ordenar, optimizar y escalar tu negocio con estrategias prácticas y personalizadas.</p>
      </div>
    </section>

    <!-- PLANES -->
    <section id="planes" class="container">
      <div class="reveal"><h2>Planes</h2></div>
      <div class="grid3 pricing">
        <article class="card reveal glow plan-card plan-theme-basic" data-plan="basic" style="--accent: var(--brand-white); --accentA: rgba(255,255,255,.35); border:2px solid var(--accent)">
          <span class="pill">Básico</span>
          <h3>Organiza y estandariza</h3>
          <p class="price">Entra con orden</p>
          <p class="tag">(Pago por proyecto)</p>
          <ul class="list-simple">
            <li>Checklist de operación</li>
            <li>Estandarización de exhibiciones</li>
            <li>Controles básicos de inventario</li>
          </ul>
          <div style="margin-top:12px"><button class="btn btn-primary plan-btn" data-plan="basic">Ver plan</button></div>
        </article>
        <article class="card reveal glow plan-card plan-theme-pro" data-plan="pro" style="--accent: var(--brand-blue); --accentA: rgba(21,112,239,.35); border:2px solid var(--accent)">
          <span class="pill">Pro</span>
          <h3>Optimiza y reduce pérdidas</h3>
          <p class="price">Acompañamiento mensual</p>
          <p class="tag">Rotación, mermas y desempeño.</p>
          <ul class="list-simple">
            <li>Conteos cíclicos y rotación</li>
            <li>Indicadores operativos básicos</li>
            <li>Formación de líderes multifuncionales</li>
          </ul>
          <div style="margin-top:12px"><button class="btn btn-primary plan-btn" data-plan="pro">Ver plan</button></div>
        </article>
        <article class="card reveal glow plan-card plan-theme-max" data-plan="max" style="--accent: var(--brand-green); --accentA: rgba(22,163,74,.35); border:2px solid var(--accent)">
          <span class="pill">Max</span>
          <h3>Escala con estrategia</h3>
          <p class="price">KPIs + capacitación continua</p>
          <p class="tag">Consultoría estratégica para crecer.</p>
          <ul class="list-simple">
            <li>KPIs y dashboard de gestión</li>
            <li>Liderazgo y manejo de equipos</li>
            <li>Programa de capacitación mensual</li>
          </ul>
          <div style="margin-top:12px"><button class="btn btn-primary plan-btn" data-plan="max">Ver plan</button></div>
        </article>
      </div>
    </section>

    <!-- SERVICIOS -->
    <section id="servicios" class="container">
      <div class="reveal"><h2>Servicios</h2></div>
      <div class="grid3">
        <div class="card reveal">
          <h3>Soporte operativo</h3>
          <ul class="list-simple">
            <li>Gestión de inventarios</li>
            <li>Administración de tienda</li>
            <li>Mercadeo de productos</li>
            <li>Servicio al cliente</li>
          </ul>
        </div>
        <div class="card reveal">
          <h3>Consultorías</h3>
          <ul class="list-simple">
            <li>Rentabilidad y ventas</li>
            <li>Experiencia del cliente</li>
            <li>Diseño de almacenes</li>
            <li>Inventarios generales</li>
          </ul>
        </div>
        <div class="card reveal">
          <h3>Soporte de ventas</h3>
          <ul class="list-simple">
            <li>Mystery Shopper</li>
            <li>Basket Market</li>
            <li>Reporte de Pareto</li>
            <li>Planeación de la demanda</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CAPACITACIÓN -->
    <section id="capacitacion" class="container">
      <div class="reveal"><h2>Capacitación</h2></div>
      <div class="grid3">
        <div class="card reveal">
          <h3>Operación</h3>
          <ul class="list-simple">
            <li>Estandarización de exhibiciones</li>
            <li>Diseño de controles básicos</li>
            <li>Manejo de indicadores operativos</li>
          </ul>
        </div>
        <div class="card reveal">
          <h3>Ventas</h3>
          <ul class="list-simple">
            <li>Atención a clientes</li>
            <li>Manejo de objeciones</li>
            <li>Líderes y multifuncionales</li>
          </ul>
        </div>
        <div class="card reveal">
          <h3>Liderazgo</h3>
          <ul class="list-simple">
            <li>Liderazgo estratégico</li>
            <li>Manejo de equipos</li>
            <li>Lineamientos de marca</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="container">
      <div class="reveal"><h2>Contacto</h2></div>
      <div class="card reveal">
        <p>Cuéntanos de tu tienda y te proponemos un plan claro.</p>
        <p>Correo: <a href="mailto:Retailoc.soporte@gmail.com">Retailoc.soporte@gmail.com</a></p>
        <p>WhatsApp: <a target="_blank" rel="noopener" href="https://wa.me/525553815006?text=Hola%20Retail%20Hub%2C%20quiero%20una%20asesor%C3%ADa">+52 55 5381 5006</a></p>
      </div>
    </section>
  </main>

  <!-- ===== Modal de Asesoría (Apps Script) ===== -->
  <div class="modal-backdrop" id="modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header style="display:flex; align-items:center; gap:10px;">
        <h3 id="modalTitle">Solicitar asesoría</h3>
        <button class="close" id="closeModalBtn">Cerrar ✕</button>
      </header>

      <!-- Volvemos a envío NATIVO (POST) para evitar CORS -->
      <form id="form-asesoria" action="https://script.google.com/macros/s/AKfycbwEWV7tsGZypGaGaaQw4TZzMx9jd3tLEFN9MOgoXwfpPMh1nUCiUsDHUMxV2QL14WOO/exec" method="POST">
        <!-- Datos de contacto -->
        <div class="card" style="margin-bottom:12px">
          <h4>Datos de contacto</h4>
          <div class="row">
            <div>
              <label>Nombre de la persona de contacto</label>
              <input name="contacto_nombre" required />
            </div>
            <div>
              <label>Teléfono / WhatsApp</label>
              <input name="contacto_tel" required />
            </div>
            <div>
              <label>Correo</label>
              <input type="email" name="contacto_email" required />
            </div>
            <div>
              <label>Nombre del negocio</label>
              <input name="negocio_nombre" required />
            </div>
          </div>
        </div>

        <!-- Preferencia de plan (si llega desde PlanModal) -->
        <input type="hidden" name="plan_preferido" id="planPreferido" value="">

        <!-- Selección rubro/servicio -->
        <div class="card" style="margin-bottom:12px">
          <h4>¿Qué necesitas?</h4>
          <div class="row">
            <div>
              <label>Rubro</label>
              <select id="rubro" name="rubro" required>
                <option value="">Selecciona…</option>
                <option value="Estrategias">Estrategias</option>
                <option value="Inventarios">Inventarios</option>
                <option value="Soporte Operativo">Soporte Operativo</option>
                <option value="Soporte Ventas">Soporte Ventas</option>
                <option value="Capacitación">Capacitación</option>
              </select>
            </div>
            <div>
              <label>Servicio</label>
              <select id="servicio" name="servicio" required disabled>
                <option value="">Selecciona un rubro…</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Preguntas dinámicas -->
        <div id="preguntas" class="card" style="display:none; margin-bottom:12px">
          <h4>Cuéntanos un poco más</h4>
          <div id="contenedor-preguntas"></div>
        </div>

        <div class="card" style="margin-bottom:12px">
          <h4>Mensaje adicional (opcional)</h4>
          <textarea name="mensaje" placeholder="Detalles, urgencia o fechas deseadas"></textarea>
        </div>

        <input type="hidden" name="_subject" value="Nueva solicitud de asesoría — Retail Hub" />
        <button class="btn btn-submit" type="submit">Enviar solicitud</button>
        <p class="helper">Te contactaremos por correo lo antes posible.</p>
      </form>
    </div>
  </div>

  <!-- ===== PlanModal ===== -->
  <div class="modal-backdrop" id="planModal">
    <div class="modal plan-modal" id="planModalBox" role="dialog" aria-modal="true" aria-labelledby="planModalTitle">
      <header style="display:flex; align-items:center; gap:10px;">
        <h3 id="planModalTitle">Detalle del plan</h3>
        <button class="close" id="closePlanModalBtn">Cerrar ✕</button>
      </header>

      <div class="card header-accent" style="margin-bottom:14px">
        <h4 id="planName" style="margin:0 0 4px 0">Plan</h4>
        <p id="planShort" style="margin:0; color:#A3AED0">Descripción corta</p>
      </div>

      <div class="row">
        <div>
          <h4>Precio</h4>
          <p id="planPrice" class="pricing price" style="margin:0">—</p>
          <p id="planLegend" class="tag">(Pago por proyecto)</p>
        </div>
        <div>
          <h4>Incluye</h4>
          <ul id="planList" class="list-simple" style="margin-top:6px"></ul>
        </div>
      </div>

      <div style="display:flex; gap:12px; margin-top:14px">
        <button class="btn btn-primary" id="planCtaBtn">Quiero este plan</button>
        <a href="#planes" class="btn btn-ghost" id="planBack">Ver otros planes</a>
      </div>
    </div>
  </div>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap">
      <p>© <span id="year"></span> Retail Hub.</p>
      <p style="font-size:13px">Hecho con ❤️ y hospedado gratis en GitHub Pages.</p>
    </div>
  </footer>

<script>
  // Año dinámico + reveal
  document.getElementById('year').textContent = new Date().getFullYear();
  const obs = new IntersectionObserver((entries)=>{entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); obs.unobserve(e.target) }})},{threshold:.12});
  document.querySelectorAll('.reveal').forEach(el=>obs.observe(el));

  // ===== Utilidad modal genérico =====
  function setupModal(backdropId, openers, closerId){
    const modal = document.getElementById(backdropId);
    const open = ()=> modal.classList.add('active');
    const close = ()=> modal.classList.remove('active');
    openers.forEach(id=>{
      const b = document.getElementById(id);
      if(b){ b.addEventListener('click', (e)=>{ e.preventDefault(); open(); }); }
    });
    const closer = document.getElementById(closerId);
    if(closer){ closer.addEventListener('click', close); }
    modal.addEventListener('click', (e)=>{ if(e.target===modal) close(); });
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });
    return {open, close, modal};
  }

  // ----- Modal Asesoría -----
  const asesor = setupModal('modal', ['openModalBtn','openModalBtn2','openModalBtn3'], 'closeModalBtn');

  // ----- Config rubros/servicios/preguntas -----
  const CONFIG = {
    "Estrategias": {
      "Análisis de rentabilidad": [
        "¿Conoce su utilidad neta actual? (sí/no)",
        "¿Cuál considera que es su mayor gasto operativo?",
        "Objetivo del análisis (reducir gastos, mejorar márgenes, planificar crecimiento)"
      ],
      "Análisis de ventas": [
        "¿Registra ventas diario/semanal? (sí/no)",
        "¿Qué tan estables son sus ventas mensuales? (muy variables / estables)",
        "¿Qué desea mejorar? (ticket promedio, número de clientes, frecuencia)"
      ],
      "Nivel de experiencia del cliente": [
        "¿Mide la satisfacción del cliente? (sí/no)",
        "¿Cómo obtiene retroalimentación? (comentarios, encuestas, ninguno)",
        "¿Qué desea mejorar? (tiempo de atención, calidad, fidelidad)"
      ]
    },
    "Inventarios": {
      "Diseño de almacenes": [
        "¿Cuenta con un espacio definido de almacén? (sí/no)",
        "Principal problema (falta de espacio, desorden, pérdidas)",
        "Metros cuadrados aproximados del área"
      ],
      "Creación de base de datos": [
        "¿Tiene sistema digital de inventarios? (Excel, POS, ninguno)",
        "Número aproximado de productos/SKUs",
        "¿Requiere importación de datos actuales? (sí/no)"
      ],
      "Inventarios generales": [
        "¿Cada cuánto realiza conteos generales?",
        "Mayor problema (faltantes, mermas, exceso de stock)",
        "¿Cuenta con personal para los conteos? (sí/no)"
      ]
    },
    "Soporte Operativo": {
      "Mercadeo de productos": [
        "Métodos actuales de exhibición/promoción",
        "Objetivo principal (rotación, destacar nuevas líneas, incrementar ventas)",
        "¿Cuenta con calendario/promociones vigentes? (sí/no)"
      ],
      "Servicio al cliente": [
        "¿Personal capacitado en servicio? (sí/no)",
        "Aspecto por mejorar (tiempo de atención, resolución, trato)",
        "¿Cuenta con protocolos escritos? (sí/no)"
      ],
      "Administración de tienda": [
        "¿Lleva controles diarios de caja, ventas y gastos? (sí/no)",
        "Reto principal (organización, personal, control de gastos)",
        "Sistema que usa hoy (manual, Excel, POS)"
      ]
    },
    "Soporte Ventas": {
      "Mystery Shoper": [
        "¿Ha usado mystery shopper antes? (sí/no)",
        "¿Qué desea evaluar? (atención, rapidez, conocimiento)",
        "Número de sucursales a evaluar"
      ],
      "Reporte Basket Market": [
        "¿Analiza productos que se venden juntos? (sí/no)",
        "Objetivo (combos, promociones, layout)",
        "¿Cuenta con histórico de tickets? (sí/no)"
      ],
      "Reporte Pareto": [
        "¿Conoce su top 20% de productos? (sí/no)",
        "Objetivo (enfocar compras, reducir inventario lento, margen)",
        "Período a analizar (mes actual, 3 meses, 12 meses)"
      ],
      "Planeación de la demanda": [
        "¿Cuenta con histórico de ventas? (sí/no)",
        "Objetivo (abastecimiento, reducir faltantes, flujo de caja)",
        "Horizonte de planeación deseado (semanal, mensual, trimestral)"
      ],
      "Estrategias de venta": [
        "¿Principal reto actual? (atraer, cerrar, fidelizar)",
        "Canal principal (tienda física, online, ambos)",
        "Objetivo de la estrategia (más clientes, mayor ticket, recurrencia)"
      ]
    },
    "Capacitación": {
      "Atención a clientes": [
        "¿Cuántas personas requieren capacitación?",
        "Modalidad preferida (presencial, en línea, mixta)",
        "Objetivo (satisfacción, fidelización, reducir quejas)"
      ],
      "Manejo de objeciones": [
        "¿El equipo enfrenta objeciones frecuentes? (sí/no)",
        "Objetivo (cerrar más ventas, confianza del equipo)",
        "Experiencia del equipo (baja, media, alta)"
      ],
      "Estandarización de exhibiciones": [
        "¿Cuentan con lineamientos de exhibición? (sí/no)",
        "Reto principal (orden, limpieza, reposición, señalización)",
        "Frecuencia de cambios de exhibición"
      ],
      "Diseño de controles básicos": [
        "¿Qué controles necesita? (entradas/salidas, caja, mermas)",
        "Herramienta actual (manual, Excel, sistema)",
        "Objetivo (menos errores, visibilidad, auditoría)"
      ],
      "Liderez y multifuncionales": [
        "Número de líderes/encargados",
        "Competencias a desarrollar (delegación, supervisión, rotación)",
        "Formato deseado (taller, coaching, programa)"
      ],
      "Manejo de indicadores operativos": [
        "¿Indicadores que ya usan? (ventas, rotación, mermas)",
        "Nivel requerido (básico, intermedio, avanzado)",
        "Objetivo (toma de decisiones, seguimiento, reportes)"
      ],
      "Liderazgo estratégico": [
        "Etapa del negocio (arranque, crecimiento, madurez)",
        "Reto principal (motivación, decisiones, expansión)",
        "Formato (curso, workshop, programa mensual)"
      ],
      "Manejo de equipos": [
        "Tamaño del equipo",
        "Reto (disciplina, coordinación, productividad)",
        "Objetivo (clima laboral, eficiencia, cumplimiento)"
      ],
      "Lineamientos de marca": [
        "¿Existen estándares de marca? (sí/no)",
        "Áreas a cubrir (uniforme, atención, exhibición, comunicación)",
        "Objetivo (uniformidad, identidad, presentación)"
      ]
    }
  };

  // Selects y contenedores
  const rubroSel = document.getElementById('rubro');
  const servicioSel = document.getElementById('servicio');
  const preguntasCard = document.getElementById('preguntas');
  const contPreg = document.getElementById('contenedor-preguntas');

  // Cargar servicios según rubro
  rubroSel && rubroSel.addEventListener('change', () => {
    servicioSel.innerHTML = '<option value="">Selecciona…</option>';
    servicioSel.disabled = true;
    contPreg.innerHTML = '';
    preguntasCard.style.display = 'none';
    const rubro = rubroSel.value;
    if(!rubro || !CONFIG[rubro]) return;
    Object.keys(CONFIG[rubro]).forEach(s => {
      const opt = document.createElement('option'); opt.value = s; opt.textContent = s;
      servicioSel.appendChild(opt);
    });
    servicioSel.disabled = false;
  });

  // Mostrar preguntas del servicio — envía etiqueta + valor y q_count
  servicioSel && servicioSel.addEventListener('change', () => {
    contPreg.innerHTML = '';
    const rubro = rubroSel.value, serv = servicioSel.value;
    if(!rubro || !serv) { preguntasCard.style.display='none'; return; }
    const preguntas = CONFIG[rubro][serv] || [];

    preguntas.forEach((q, i) => {
      const wrap = document.createElement('div'); wrap.style.marginBottom='10px';

      const lab = document.createElement('label'); lab.textContent = q;

      const inp = document.createElement('input'); // respuesta
      inp.name = `q_${i+1}_value`;
      inp.required = true;

      const hidden = document.createElement('input'); // texto de la pregunta
      hidden.type = 'hidden';
      hidden.name = `q_${i+1}_label`;
      hidden.value = q;

      wrap.appendChild(lab);
      wrap.appendChild(inp);
      wrap.appendChild(hidden);
      contPreg.appendChild(wrap);
    });

    // Enviamos cuántas preguntas hay
    const count = document.createElement('input');
    count.type = 'hidden';
    count.name = 'q_count';
    count.value = preguntas.length;
    contPreg.appendChild(count);

    preguntasCard.style.display = 'block';
  });

  // ===== PlanModal =====
  const PLAN_CTA_TEXT = 'Solicitar plan';
  const PLAN_DETAIL = {
    basic: {
      name:'Básico',
      short:'Organiza y estandariza',
      price:'Pago por proyecto',
      legend:'(Pago por proyecto)',
      theme:'plan-theme-basic',
      items:[
        'Checklist de operación',
        'Estandarización de exhibiciones',
        'Controles básicos de inventario'
      ]
    },
    pro: {
      name:'Pro',
      short:'Optimiza y reduce pérdidas',
      price:'Acompañamiento mensual',
      legend:'Servicio continuo',
      theme:'plan-theme-pro',
      items:[
        'Conteos cíclicos y rotación',
        'Indicadores operativos básicos',
        'Formación de líderes multifuncionales'
      ]
    },
    max: {
      name:'Max',
      short:'Escala con estrategia',
      price:'KPIs + capacitación continua',
      legend:'Consultoría estratégica',
      theme:'plan-theme-max',
      items:[
        'KPIs y dashboard de gestión',
        'Liderazgo y manejo de equipos',
        'Programa de capacitación mensual'
      ]
    }
  };

  const planModal = setupModal('planModal', [], 'closePlanModalBtn');
  const planBox = document.getElementById('planModalBox');
  const planName = document.getElementById('planName');
  const planShort = document.getElementById('planShort');
  const planPrice = document.getElementById('planPrice');
  const planLegend = document.getElementById('planLegend');
  const planList = document.getElementById('planList');
  const planCtaBtn = document.getElementById('planCtaBtn');
  const planPreferido = document.getElementById('planPreferido');

  document.querySelectorAll('.plan-btn').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      const key = btn.dataset.plan;
      const d = PLAN_DETAIL[key];
      if(!d) return;
      // set theme
      planBox.classList.remove('plan-theme-basic','plan-theme-pro','plan-theme-max');
      planBox.classList.add(d.theme);
      // content
      planName.textContent = d.name;
      planShort.textContent = d.short;
      planPrice.textContent = d.price;
      planLegend.textContent = d.legend || '';
      planList.innerHTML = '';
      d.items.forEach(it=>{
        const li = document.createElement('li'); li.textContent = it; planList.appendChild(li);
      });
      planCtaBtn.textContent = PLAN_CTA_TEXT;
      planModal.open();
      // CTA -> abre asesoría y prellena plan preferido
      planCtaBtn.onclick = ()=>{
        planPreferido.value = d.name;
        planModal.close();
        asesor.open();
      };
    });
  });
</script>
</body>
</html>
